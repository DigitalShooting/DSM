extends ../layout.jade

block body
	div(ng-app="lines" ng-controller="lines")
		section(class="col-xs-offset-1 col-xs-3")
			h2 Stände
			ul(class="nav nav-pills nav-stacked")
				li(ng-repeat="line in lines track by $index" class="col-xs-12")
					div(class="btn-group fullWidth" role="group")
						button(type="button" ng-click="toggleAll(false); toggle(line._id);" class="btn col-xs-10 {{line.isConnected ? 'btn-success' : 'btn-default' }} {{state[line._id] ? 'selected' : 'deselected'}}") {{line.label}}
						button(type="button" ng-click="toggle(line._id)" class="btn col-xs-2 {{line.isConnected ? 'btn-success' : 'btn-default' }} {{state[line._id] ? 'selected' : 'deselected'}}") {{state[line._id] ? '-' : '+'}}
				
				li(class="col-xs-12 btn-group" role="group")
					button(type="button" ng-click="toggleAll(true)" class="btn col-xs-6 btn-default") Alle markieren
					button(type="button" ng-click="toggleAll(false)" class="btn col-xs-6 btn-default") Zurücksetzen
			
			
		section(class="col-xs-8")
			h1 Verwalten
			ul(class="nav nav-tabs")
				li(class="active")
					a(href=url) Verwalten
				//- li(class="")
				//- 	a(href=url) Betrachten
			
			.col-xs-12
				div(class="alert alert-info animate" role="alert" ng-hide="selectedLines != 0") Kein Stand ausgewählt.
			
			.col-xs-6
				div(class="panel panel-default power animate" ng-hide="selectedLines == 0")
					div(class="panel-heading") Allgemein
					div(class="panel-body")
						div(class="form-horizontal")
							div(class="form-group")
								label(for="" class="col-xs-2 control-label") Status
								div(class="btn-group col-xs-10" role="group")
									button(type="submit" class="btn btn-default col-xs-6" ng-click="setPower(false)") Herunterfahren
									button(type="submit" class="btn btn-success col-xs-6" ng-click="setPower(true)") Hochfahren
							div(class="form-group")
								label(for="" class="col-xs-2 control-label") Drucken
								div(class="btn-group col-xs-10" role="group")
									button(type="submit" class="btn btn-default col-xs-6" ng-click="print('current')") Akteulle Session
									button(type="submit" class="btn btn-default col-xs-6" ng-click="print('all')") Alle Session
			
			
			.col-xs-6
				div(class="panel panel-default animate" ng-hide="selectedLines == 0")
					div(class="panel-heading") Disziplin
					div(class="panel-body")
						div(class="form-horizontal")
							div(class="form-group")
								label(class="col-sm-2 control-label") Disziplin
								div(class="col-sm-10")
									ui-select(ng-model="selected.disziplin" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" on-select="selectDisziplin()")
										ui-select-match {{selected.disziplin.title}}
										ui-select-choices(group-by="groupByType" repeat="disziplin in disziplinen | propsFilter: {title: $select.search}" )
											div {{disziplin.title}}
		
							div(class="form-group")
								label(class="col-sm-2 control-label") Mode
								div(class="col-sm-10")
									ui-select(ng-model="selected.part" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" on-select="selectPart()")
										ui-select-match {{selected.part.title}}
										ui-select-choices(repeat="part in parts | propsFilter: {title: $select.search}")
											div {{part.title}}

			.col-xs-12
				div(class="panel panel-default animate" ng-hide="selectedLines != 1")
					div(class="panel-heading") Schütze
					div(class="panel-body")
						div(class="form-horizontal")
							.col-xs-6
								div(class="form-group")
									label(class="col-sm-2 control-label") Verein
									div(class="col-sm-10")
										ui-select(ng-model="selected.verein" theme="bootstrap" ng-disabled="false" reset-search-input="true")
											ui-select-match {{selected.verein.name}}
											ui-select-choices(repeat="verein in vereine | propsFilter: {name: $select.search}")
												div {{verein.name}}
							.col-xs-6
								div(class="form-group")
									label(class="col-sm-2 control-label") Schütze
									div(class="col-sm-10")
										ui-select(ng-model="selected.schuetze" theme="bootstrap" ng-disabled="selected.verein == undefined" reset-search-input="false" on-select="selectSchuetze()")
											ui-select-match {{selected.schuetze.firstName}} {{selected.schuetze.lastName}}
											ui-select-choices(repeat="schuetze in schuetzen | propsFilter: {firstName: $select.search, lastName: $select.search} | propsFilter: {vereinID: selected.verein._id}")
												div {{schuetze.firstName}} {{schuetze.lastName}}
												
												
			

	
	script.
		var config = !{JSON.stringify(config)}
		var vereine = !{JSON.stringify(vereine)}
		var schuetzen = !{JSON.stringify(schuetzen)}
	
	script(src="/js/lines.js")
